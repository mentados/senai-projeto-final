var beforeFancyUrl,onPopClose=!1;function getUrlBase(t){return myurl=window.location,splited_url=myurl.toString().split("/"),final_url=splited_url[0]+"//"+splited_url[2],isLocalhost(document.location.hostname)?final_url=splited_url[0]+"//"+splited_url[2]+"/"+splited_url[3]:final_url=splited_url[0]+"//"+splited_url[2],final_url+"/"+t}function isLocalhost(t){if("localhost"==t)return!0;exploded=t.split(".");for(var e=0;e<exploded.length;e++)if(isNaN(exploded[e]))return!1;return!0}function showOptions(t,e,o){beforeFancyUrl=window.location.href,onPopClose=!1,window.history.pushState("prod_page_"+t,"prod_page_"+t,o),jQuery("#fancybox"+t).trigger("click")}function setAjaxData(t,e,o){jQuery(".carrinho")&&(jQuery(".carrinho").replaceWith(t.sidebar),swal.close(),Geral.calculaPosicaoItems(),Geral.abreCarrinho(),jQuery(".loadingaddprod"+o).hide(),~window.location.pathname.indexOf("/checkout/cart")&&setTimeout(location.reload.bind(location),700)),jQuery.fancybox.close()}function setAjaxLoading(){swal({title:"<div class='uil-rolling-css' style='transform:scale(0.31);'><div><div></div><div></div></div></div>",text:"<h2>Aguarde...</h2><br>Adicionando produto ao carrinho.",showConfirmButton:!1,html:!0})}function hidewindow(t,e){e.fadeOut(400),t.fadeOut(400).html("")}function removerItem(t){return jQuery.ajax({url:getUrlBase("ajax/index/del/"),type:"get",data:"product="+t,dataType:"json",success:function(t){"SUCCESS"==t.status&&jQuery(".carrinho").replaceWith(t.sidebar)}}),!1}function setAjaxError(t,e){swal({title:"Ops...",type:"error",text:t.message,html:!0})}window.onpopstate=function(t){window.history.state&&window.history.state.startsWith("prod_page_")?(id=window.history.state.replace("prod_page_",""),jQuery("#fancybox"+id).trigger("click")):window.location.href==beforeFancyUrl?(onPopClose=!0,jQuery.fancybox.close()):location.reload()},jQuery(document).ready(function(){jQuery.noConflict(),jQuery(".fancybox").fancybox({wrapCSS:"quick-produto",hideOnContentClick:!0,autoSize:!1,autoDimensions:!1,width:1170,height:620,fitToView:!1,type:"iframe",showTitle:!1,scrolling:"no",helpers:{overlay:{locked:!1}},afterClose:function(){onPopClose||window.history.pushState("catalog_page","catalog_page",beforeFancyUrl)}}),jQuery(document).on("click",".addproductajax",function(t){jQuery(this);var e=jQuery(this).data("id"),o=jQuery(this).parent().parent().find(".qty-list-wrap .qty-list").val();o=Math.max(o,1),jQuery.ajax({url:getUrlBase("ajax/index/add/"),type:"get",data:"product="+e+"&qty="+o+"&isAjax=1",dataType:"json",beforeSend:function(){setAjaxLoading()},success:function(t){"SUCCESS"==t.status?setAjaxData(t,!0,e):setAjaxError(t,e)}})})}),jQuery(document).on("click",".bt-add-cart",function(t){jQuery(this);var e=jQuery(this).data("id"),o=jQuery(this).data("url");jQuery.ajax({url:getUrlBase("ajax/index/add/"),type:"get",data:"product="+e+"&qty=1&isAjax=1",dataType:"json",success:function(t){"SUCCESS"==t.status?location.href=getUrlBase("checkout/cart"):swal({title:"Você precisa escolher as opções do produto!",text:"Redirecionar para a página do produto?",type:"warning",showCancelButton:!0,cancelButtonText:"fechar",confirmButtonColor:"#73af22",confirmButtonText:"Sim, irei escolher as opções!",closeOnConfirm:!1},function(){location.href=o})}})});